"use strict";(self.webpackChunkjwtsmith_docs=self.webpackChunkjwtsmith_docs||[]).push([[4814],{3301:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>d,contentTitle:()=>c,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"tutorial-basics/token-verification","title":"Token Verification","description":"The verify method in JWT Smith is designed to validate JSON Web Tokens (JWTs) with the same flexibility and configurability as the sign method. This asynchronous function ensures secure and reliable verification of tokens, allowing developers to enforce token integrity and authenticity.","source":"@site/versioned_docs/version-0.1.0/tutorial-basics/token-verification.md","sourceDirName":"tutorial-basics","slug":"/tutorial-basics/token-verification","permalink":"/docs/0.1.0/tutorial-basics/token-verification","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/versioned_docs/version-0.1.0/tutorial-basics/token-verification.md","tags":[],"version":"0.1.0","sidebarPosition":4,"frontMatter":{"sidebar_position":4},"sidebar":"tutorialSidebar","previous":{"title":"Token Signing","permalink":"/docs/0.1.0/tutorial-basics/sign-token"},"next":{"title":"Tutorial - Middleware","permalink":"/docs/0.1.0/category/tutorial---middleware"}}');var t=n(4848),r=n(8453);const o={sidebar_position:4},c="Token Verification",d={},l=[{value:"How the <code>verify</code> Method Works",id:"how-the-verify-method-works",level:2},{value:"Parameters",id:"parameters",level:3},{value:"1. <code>token</code> (string) [required]",id:"1-token-string-required",level:4},{value:"2. <code>secret</code> (string | Buffer | KeyObject | { [key]: string | Buffer; passphrase: string } | PrivateKeyInput | JsonWebKeyInput) [required]",id:"2-secret-string--buffer--keyobject---key-string--buffer-passphrase-string---privatekeyinput--jsonwebkeyinput-required",level:4},{value:"3. <code>options</code> (Object) [optional]",id:"3-options-object-optional",level:4},{value:"Return Value",id:"return-value",level:3},{value:"Setting Default Verification Options",id:"setting-default-verification-options",level:2},{value:"Example: Using <code>JwtManager</code> for Default Options",id:"example-using-jwtmanager-for-default-options",level:3},{value:"Best Practices",id:"best-practices",level:2}];function a(e){const i={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.header,{children:(0,t.jsx)(i.h1,{id:"token-verification",children:"Token Verification"})}),"\n",(0,t.jsxs)(i.p,{children:["The ",(0,t.jsx)(i.code,{children:"verify"})," method in JWT Smith is designed to validate JSON Web Tokens (JWTs) with the same flexibility and configurability as the ",(0,t.jsx)(i.code,{children:"sign"})," method. This asynchronous function ensures secure and reliable verification of tokens, allowing developers to enforce token integrity and authenticity."]}),"\n",(0,t.jsxs)(i.h2,{id:"how-the-verify-method-works",children:["How the ",(0,t.jsx)(i.code,{children:"verify"})," Method Works"]}),"\n",(0,t.jsxs)(i.p,{children:["The ",(0,t.jsx)(i.code,{children:"verify"})," method accepts an object as its parameter, similar to the ",(0,t.jsx)(i.code,{children:"sign"})," method. However, the primary difference is that the first property is the ",(0,t.jsx)(i.code,{children:"token"})," to be verified."]}),"\n",(0,t.jsx)(i.h3,{id:"parameters",children:"Parameters"}),"\n",(0,t.jsxs)(i.h4,{id:"1-token-string-required",children:["1. ",(0,t.jsx)(i.code,{children:"token"})," (string) [required]"]}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"Description:"})," The JWT to be verified."]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"Examples:"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:["A signed JWT string (e.g., ",(0,t.jsx)(i.code,{children:'"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."'}),")"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(i.h4,{id:"2-secret-string--buffer--keyobject---key-string--buffer-passphrase-string---privatekeyinput--jsonwebkeyinput-required",children:["2. ",(0,t.jsx)(i.code,{children:"secret"})," (string | Buffer | KeyObject | { [key]: string | Buffer; passphrase: string } | PrivateKeyInput | JsonWebKeyInput) [required]"]}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"Description:"})," The secret or public key used to verify the JWT."]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"Details:"})," The key must match the one used during the signing process."]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"Note:"})," Secrets and keys must align with the algorithm used."]}),"\n"]}),"\n",(0,t.jsxs)(i.h4,{id:"3-options-object-optional",children:["3. ",(0,t.jsx)(i.code,{children:"options"})," (Object) [optional]"]}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:["\n",(0,t.jsxs)(i.p,{children:[(0,t.jsx)(i.strong,{children:"Description:"})," Additional options for configuring the verification process."]}),"\n"]}),"\n",(0,t.jsxs)(i.li,{children:["\n",(0,t.jsx)(i.p,{children:(0,t.jsx)(i.strong,{children:"Supported Properties:"})}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.code,{children:"algorithms"}),": List of allowed algorithms for verification (e.g., ",(0,t.jsx)(i.code,{children:'["HS256", "RS256"]'}),")."]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.code,{children:"audience"}),": Expected audience of the token."]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.code,{children:"issuer"}),": Expected issuer of the token."]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.code,{children:"subject"}),": Expected subject of the token."]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.code,{children:"jwtid"}),": JWT ID to match against the ",(0,t.jsx)(i.code,{children:"jti"})," claim in the token."]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.code,{children:"ignoreExpiration"}),": When set to ",(0,t.jsx)(i.code,{children:"true"}),", ignores token expiration (use with caution)."]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.code,{children:"ignoreNotBefore"}),": When set to ",(0,t.jsx)(i.code,{children:"true"}),", ignores the ",(0,t.jsx)(i.code,{children:"nbf"})," claim (use with caution)."]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.code,{children:"complete"}),": When set to ",(0,t.jsx)(i.code,{children:"true"}),", returns the decoded payload and header as an object."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(i.li,{children:["\n",(0,t.jsxs)(i.p,{children:[(0,t.jsx)(i.strong,{children:"Note:"})," All options provided by the ",(0,t.jsx)(i.code,{children:"jsonwebtoken"})," library are supported."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(i.h3,{id:"return-value",children:"Return Value"}),"\n",(0,t.jsx)(i.p,{children:"The verify method returns a Promise that resolves to:"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.code,{children:"string"}),": If the token is successfully verified, and the payload is a string."]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.code,{children:"Jwt"}),": If the token is successfully verified, and the payload is a Jwt object."]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.code,{children:"JwtPayload"}),": If the token is successfully verified, and the payload is a JwtPayload object."]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.code,{children:"undefined"}),": If the token is successfully verified, but the payload is empty or cannot be determined."]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.code,{children:"Error"}),": If the token verification fails."]}),"\n"]}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-typescript",children:"Promise<string | Jwt | JwtPayload | undefined>\n"})}),"\n",(0,t.jsx)(i.hr,{}),"\n",(0,t.jsx)(i.h2,{id:"setting-default-verification-options",children:"Setting Default Verification Options"}),"\n",(0,t.jsxs)(i.p,{children:["Similar to signing, you can configure default options for verification using the ",(0,t.jsx)(i.code,{children:"JwtManager"}),". This simplifies the process by defining consistent behaviors across your application."]}),"\n",(0,t.jsxs)(i.h3,{id:"example-using-jwtmanager-for-default-options",children:["Example: Using ",(0,t.jsx)(i.code,{children:"JwtManager"})," for Default Options"]}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-typescript",children:"import { JwtManager, setDefaultVerifyOptions, verify } from 'jwt-smith';\n\nJwtManager({\n  publicKey: process.env.PUBLIC_KEY || 'your-public-key',\n  verifyOptions: { ... }\n});\n\n// OR Set default verification options\nsetDefaultVerifyOptions({\n  algorithms: ['RS256'],\n  issuer: 'my-app',\n});\n\n// Verify a token\nconst decoded = await verify({\n  token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...',\n  secret: 'my-public-key',\n});\n\nconsole.log('Decoded Payload:', decoded);\n"})}),"\n",(0,t.jsx)(i.hr,{}),"\n",(0,t.jsx)(i.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,t.jsxs)(i.ol,{children:["\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"Use Secure Secrets:"})," Always use the correct public or private keys for verification."]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"Leverage Default Options:"})," Set defaults using ",(0,t.jsx)(i.code,{children:"JwtManager"})," to reduce errors and improve consistency."]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"Validate Critical Claims:"})," Ensure critical claims like ",(0,t.jsx)(i.code,{children:"audience"}),", ",(0,t.jsx)(i.code,{children:"issuer"}),", and ",(0,t.jsx)(i.code,{children:"subject"})," are validated to prevent misuse."]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"Avoid Ignoring Claims:"})," Avoid using options like ",(0,t.jsx)(i.code,{children:"ignoreExpiration"})," and ",(0,t.jsx)(i.code,{children:"ignoreNotBefore"})," in production environments."]}),"\n"]}),"\n",(0,t.jsx)(i.hr,{})]})}function h(e={}){const{wrapper:i}={...(0,r.R)(),...e.components};return i?(0,t.jsx)(i,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}},8453:(e,i,n)=>{n.d(i,{R:()=>o,x:()=>c});var s=n(6540);const t={},r=s.createContext(t);function o(e){const i=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function c(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),s.createElement(r.Provider,{value:i},e.children)}}}]);