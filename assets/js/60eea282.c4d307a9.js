"use strict";(self.webpackChunkjwtsmith_docs=self.webpackChunkjwtsmith_docs||[]).push([[5900],{2101:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>t,metadata:()=>o,toc:()=>c});const o=JSON.parse('{"id":"tutorial-basics/jwt-manager","title":"JwtManager","description":"Centralized Configuration for JWT Smith","source":"@site/docs/tutorial-basics/jwt-manager.md","sourceDirName":"tutorial-basics","slug":"/tutorial-basics/jwt-manager","permalink":"/docs/next/tutorial-basics/jwt-manager","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/tutorial-basics/jwt-manager.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"installation-and-setup","permalink":"/docs/next/tutorial-basics/installation-and-setup"},"next":{"title":"Token Signing","permalink":"/docs/next/tutorial-basics/sign-token"}}');var r=i(4848),s=i(8453);const t={sidebar_position:2},l="JwtManager",a={},c=[{value:"Centralized Configuration for JWT Smith",id:"centralized-configuration-for-jwt-smith",level:3},{value:"Why Use JwtManager?",id:"why-use-jwtmanager",level:2},{value:"Parameters",id:"parameters",level:2},{value:"1. <code>logger</code> (Object) [optional]",id:"1-logger-object-optional",level:3},{value:"2. <code>publicKey</code> (String) [required]",id:"2-publickey-string-required",level:3},{value:"3. <code>refreshTokenKey</code> (String) [optional]",id:"3-refreshtokenkey-string-optional",level:3},{value:"4. <code>signOptions</code> (Object) [optional]",id:"4-signoptions-object-optional",level:3},{value:"5. <code>verifyOptions</code> (Object) [optional]",id:"5-verifyoptions-object-optional",level:3},{value:"6. <code>middlewareConfigs</code> (Object) [optional]",id:"6-middlewareconfigs-object-optional",level:3},{value:"Middleware Configurations",id:"middleware-configurations",level:4},{value:"Middleware Custom Methods",id:"middleware-custom-methods",level:4},{value:"Example Configuration",id:"example-configuration",level:2},{value:"Next Steps",id:"next-steps",level:2}];function d(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"jwtmanager",children:"JwtManager"})}),"\n",(0,r.jsx)(n.h3,{id:"centralized-configuration-for-jwt-smith",children:"Centralized Configuration for JWT Smith"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"JwtManager"})," method in JWT Smith provides developers with a centralized way to configure and customize the behavior of token signing, verification, and middleware functionalities. It simplifies the setup process while allowing for fine-grained control through optional parameters and custom methods."]}),"\n",(0,r.jsx)(n.h2,{id:"why-use-jwtmanager",children:"Why Use JwtManager?"}),"\n",(0,r.jsxs)(n.p,{children:["By leveraging ",(0,r.jsx)(n.code,{children:"JwtManager"}),", you can:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Define common configurations for signing and verifying JWTs."}),"\n",(0,r.jsx)(n.li,{children:"Pass custom methods to handle middleware behavior."}),"\n",(0,r.jsx)(n.li,{children:"Ensure consistent settings across your application."}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["This flexibility makes ",(0,r.jsx)(n.code,{children:"JwtManager"})," a key component of JWT Smith, tailored for both simple and advanced use cases."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"parameters",children:"Parameters"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"JwtManager"})," method accepts the following parameters:"]}),"\n",(0,r.jsxs)(n.h3,{id:"1-logger-object-optional",children:["1. ",(0,r.jsx)(n.code,{children:"logger"})," (Object) [optional]"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Description:"})," A custom logger instance (e.g., Pino, Winston) for logging events and errors."]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"2-publickey-string-required",children:["2. ",(0,r.jsx)(n.code,{children:"publicKey"})," (String) [required]"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Description:"})," The public key used for verifying JWTs."]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"3-refreshtokenkey-string-optional",children:["3. ",(0,r.jsx)(n.code,{children:"refreshTokenKey"})," (String) [optional]"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Description:"})," The key used for signing refresh tokens."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Note:"})," If the key is undefined module will use the ",(0,r.jsx)(n.code,{children:"public-key"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"4-signoptions-object-optional",children:["4. ",(0,r.jsx)(n.code,{children:"signOptions"})," (Object) [optional]"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Description:"})," Configuration options for signing JWTs."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Details:"})," All options provided by the ",(0,r.jsx)(n.code,{children:"jsonwebtoken"})," library are supported."]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"5-verifyoptions-object-optional",children:["5. ",(0,r.jsx)(n.code,{children:"verifyOptions"})," (Object) [optional]"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Description:"})," Configuration options for verifying JWTs."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Details:"})," All options provided by the ",(0,r.jsx)(n.code,{children:"jsonwebtoken"})," library are supported."]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"6-middlewareconfigs-object-optional",children:["6. ",(0,r.jsx)(n.code,{children:"middlewareConfigs"})," (Object) [optional]"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Description:"})," Configuration object for customizing middleware behavior."]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"middleware-configurations",children:"Middleware Configurations"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsxs)(n.strong,{children:[(0,r.jsx)(n.code,{children:"tokenStorage"})," (Object) [optional]:"]})," Custom storage for tokens, typically a class instance implementing storage methods."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsxs)(n.strong,{children:[(0,r.jsx)(n.code,{children:"authHeaderName"})," (String) [optional]:"]})," Name of the HTTP header that carries the authentication token."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsxs)(n.strong,{children:[(0,r.jsx)(n.code,{children:"refreshTokenHeaderName"})," (String) [optional]:"]})," Name of the HTTP header that carries the refresh token."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsxs)(n.strong,{children:[(0,r.jsx)(n.code,{children:"appendToRequest"})," (Array | Boolean) [optional]:"]})," A list of properties to append to the request object. Acceptable values:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"user"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"role"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"language"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"tokenPayload"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsxs)(n.strong,{children:[(0,r.jsx)(n.code,{children:"cookieSettings"})," (Object):"]})," Settings for handling cookies.","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsxs)(n.strong,{children:[(0,r.jsx)(n.code,{children:"accessTokenCookieName"})," (String):"]})," Name of the cookie that stores the access token."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsxs)(n.strong,{children:[(0,r.jsx)(n.code,{children:"accessCookieOptions"})," (Object):"]})," Options for generating the access token cookie (compatible with Express cookie options)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsxs)(n.strong,{children:[(0,r.jsx)(n.code,{children:"refreshTokenCookieName"})," (String):"]})," Name of the cookie that stores the refresh token."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsxs)(n.strong,{children:[(0,r.jsx)(n.code,{children:"refreshCookieOptions"})," (Object):"]})," Options for generating the refresh token cookie (compatible with Express cookie options)."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"middleware-custom-methods",children:"Middleware Custom Methods"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsxs)(n.strong,{children:[(0,r.jsx)(n.code,{children:"tokenGenerationHandler"})," (Function) [required]:"]})," A custom handler for generating access and refresh tokens."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsxs)(n.strong,{children:[(0,r.jsx)(n.code,{children:"authTokenExtractor"})," (Function) [optional]:"]})," A custom handler for extracting the auth token from headers."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsxs)(n.strong,{children:[(0,r.jsx)(n.code,{children:"authTokenPayloadVerifier"})," (Function) [optional]:"]})," A custom handler for verifying the payload of the auth token."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsxs)(n.strong,{children:[(0,r.jsx)(n.code,{children:"refreshTokenPayloadVerifier"})," (Function) [optional]:"]})," A custom handler for verifying the payload of the refresh token."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsxs)(n.strong,{children:[(0,r.jsx)(n.code,{children:"refreshTokenHolderVerifier"})," (Function) [optional]:"]})," A custom handler for verifying the owner/holder of the refresh token."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsxs)(n.strong,{children:[(0,r.jsx)(n.code,{children:"extractApiVersion"})," (Function) [optional]:"]})," A custom handler for extracting the API version from the request."]}),"\n"]}),"\n",(0,r.jsx)(n.admonition,{title:"NOTE",type:"danger",children:(0,r.jsxs)(n.p,{children:["JWT Smith provides a memory-based solution for token storage, but it is ",(0,r.jsx)(n.strong,{children:"highly not recommended for production environments"}),"."]})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"example-configuration",children:"Example Configuration"}),"\n",(0,r.jsxs)(n.p,{children:["Here\u2019s an example of setting up ",(0,r.jsx)(n.code,{children:"JwtManager"})," with custom configurations:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import { JwtManager } from 'jwt-smith';\n\nconst jwtManager = JwtManager({\n  publicKey: process.env.PUBLIC_KEY || 'your-public-key',\n  refreshTokenKey: process.env.REFRESH_TOKEN_KEY || 'your-refresh-key',\n  signOptions: {\n    algorithm: 'RS256',\n    expiresIn: '1h',\n  },\n  verifyOptions: {\n    algorithms: ['RS256'],\n  },\n  middlewareConfigs: {\n    authHeaderName: 'Authorization',\n    refreshTokenHeaderName: 'X-Refresh-Token',\n    appendToRequest: ['user', 'role'],\n    cookieSettings: {\n      accessTokenCookieName: 'auth_token',\n      accessCookieOptions: {\n        httpOnly: true,\n        secure: true,\n        sameSite: 'strict',\n      },\n      refreshTokenCookieName: 'refresh_token',\n      refreshCookieOptions: {\n        httpOnly: true,\n        secure: true,\n        sameSite: 'strict',\n      },\n    },\n    tokenGenerationHandler: async (payload) => {\n      // Custom logic for generating tokens\n      return {\n        accessToken: 'generated-access-token',\n        refreshToken: 'generated-refresh-token',\n      };\n    },\n    authTokenExtractor: (req) => req.headers['authorization'],\n  },\n  logger: console, // Using the built-in console as a logger\n});\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,r.jsxs)(n.p,{children:["Now that you\u2019ve configured the ",(0,r.jsx)(n.code,{children:"JwtManager"}),", you can start using it for token signing, verification, and middleware integration."]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>t,x:()=>l});var o=i(6540);const r={},s=o.createContext(r);function t(e){const n=o.useContext(s);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),o.createElement(s.Provider,{value:n},e.children)}}}]);